import{_ as j}from"./CmpCXyYu.js";import{d as V,v as o,x as a,y as e,Q as F,j as C,r as h,o as I,G as t,F as M,B as S,I as w,z as c,L as k,K as y,A,M as R,X as G,P as L,C as N,V as K}from"./BrCeWUXW.js";import{u as T,K as U}from"./B2pKkn0n.js";import"./DlAUqK2U.js";const z={class:"p-2 rounded-lg transition-colors bg-orange-500"},D=["fill"],E=e("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"},null,-1),H=e("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),P=e("g",{id:"SVGRepo_iconCarrier"},[e("path",{d:"M5 6.2C5 5.07989 5 4.51984 5.21799 4.09202C5.40973 3.71569 5.71569 3.40973 6.09202 3.21799C6.51984 3 7.07989 3 8.2 3H15.8C16.9201 3 17.4802 3 17.908 3.21799C18.2843 3.40973 18.5903 3.71569 18.782 4.09202C19 4.51984 19 5.07989 19 6.2V21L12 16L5 21V6.2Z",stroke:"white","stroke-width":"2","stroke-linejoin":"round"})],-1),Q=[E,H,P],X=V({__name:"movieFavoriteButton",props:{favorite:{type:Boolean}},setup(b){const r=b;return(v,u)=>(o(),a("button",z,[(o(),a("svg",{class:"h-[20px] w-[20px]",viewBox:"0 0 24 24",fill:r.favorite?"white":"transparent",xmlns:"http://www.w3.org/2000/svg",stroke:"#ffffff"},Q,8,D))]))}}),Z={class:"w-full flex items-center justify-between mb-7"},q={class:"text-3xl"},J={class:"text-white/70"},O={class:"flex flex-col lg:flex-row gap-y-5 gap-x-12 max-h-[600px]"},W=["data-kinopoisk"],Y={key:0,class:"w-full lg:w-[30%] flex flex-col overflow-y-hidden"},ee={class:"flex items-center justify-between mb-4"},te=e("p",null,"Факты:",-1),se={class:"overflow-y-auto"},oe={class:"list-decimal ml-7"},ae={class:"mt-16"},le=e("h3",{class:"text-3xl mb-4"},"Описание",-1),ne={class:""},ie={key:0,class:"mt-16"},re=e("h3",{class:"text-3xl mb-4"},"Галерея",-1),ce={class:"relative group"},ue={class:"blur-lg transition-all group-hover:blur-0 flex gap-x-4 overflow-x-auto h-[250px]"},de=["src","alt"],_e=e("div",{class:"opacity-100 group-hover:hidden transition-opacity absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-white text-4xl"}," Может содержать спойлеры ",-1),fe=V({__name:"[id]",setup(b){const r=F(),v=T(),u=C(()=>Array.isArray(r.params.id)?r.params.id[0]:r.params.id),m=new U,s=h(null),f=h(null),x=h([]),g=C(()=>{var n;return(n=s.value)==null?void 0:n.genres.map(i=>i.genre)}),d=h(!0);I(async()=>{s.value=await m.getById(u.value),s.value.favorite=v.checkFavorite(s.value.kinopoiskId),f.value=await m.getFacts(u.value).then(i=>i.map(_=>{const p=_.text.replace(/(<([^>]+)>)/gi,"");return{..._,text:p}})),x.value=await m.getMovieImages(+u.value);const n=document.createElement("script");n.setAttribute("src","/kinobox.min.js"),n.async=!0,document.head.appendChild(n)});const B=()=>{s.value&&(v.favoriteToggle(s.value),s.value.favorite=!s.value.favorite)};return(n,i)=>{const _=j;return t(s)&&t(g)?(o(),M(_,{key:0,class:"pt-24"},{default:S(()=>{var p;return[e("div",Z,[e("div",null,[e("h1",q,c(t(s).name),1),(o(!0),a(y,null,k(t(g),(l,$)=>(o(),a("span",J,c(l)+c($===t(g).length-1?"":", "),1))),256))]),A(X,{favorite:t(s).favorite,onClick:B},null,8,["favorite"])]),e("div",O,[e("div",{"data-kinobox":"auto","data-kinopoisk":t(s).kinopoiskId,class:"h-auto w-full lg:w-[70%] mx-auto"},null,8,W),(p=t(f))!=null&&p.length?(o(),a("div",Y,[e("div",ee,[te,e("label",null,[R(e("input",{"onUpdate:modelValue":i[0]||(i[0]=l=>L(d)?d.value=l:null),type:"checkbox"},null,512),[[G,t(d)]]),N(" Без спойлеров ")])]),e("div",se,[e("ol",oe,[(o(!0),a(y,null,k(t(f),l=>(o(),a("li",{class:K(["tracking-normal leading-relaxed my-2",l.spoiler&&t(d)?"blur-sm":""])},c(l.text),3))),256))])])])):w("",!0)]),e("section",ae,[le,e("div",ne,c(t(s).description),1)]),t(x).length?(o(),a("section",ie,[re,e("div",ce,[e("div",ue,[(o(!0),a(y,null,k(t(x),l=>(o(),a("img",{class:"h-full",src:l.previewUrl,alt:l.previewUrl},null,8,de))),256))]),_e])])):w("",!0)]}),_:1})):w("",!0)}}});export{fe as default};
