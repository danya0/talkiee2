import{_ as M}from"./UItERm5_.js";import{d as w,v as o,x as l,y as t,r as g,N as j,Z as E,G as s,Q as N,C as A,L as k,M as y,X as L,z as i,_ as T,R as G,j as h,o as U,F as V,B as x,J as f,A as B}from"./CUVRfy3p.js";import{K as z}from"./CHcXnI8s.js";import{u as D}from"./099bz77x.js";import"./DlAUqK2U.js";const K={class:"p-2 rounded-lg transition-colors bg-orange-500"},Z=["fill"],H=t("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"},null,-1),J=t("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Q=t("g",{id:"SVGRepo_iconCarrier"},[t("path",{d:"M5 6.2C5 5.07989 5 4.51984 5.21799 4.09202C5.40973 3.71569 5.71569 3.40973 6.09202 3.21799C6.51984 3 7.07989 3 8.2 3H15.8C16.9201 3 17.4802 3 17.908 3.21799C18.2843 3.40973 18.5903 3.71569 18.782 4.09202C19 4.51984 19 5.07989 19 6.2V21L12 16L5 21V6.2Z",stroke:"white","stroke-width":"2","stroke-linejoin":"round"})],-1),X=[H,J,Q],q=w({__name:"movieFavoriteButton",props:{favorite:{type:Boolean}},setup(_){const r=_;return(n,p)=>(o(),l("button",K,[(o(),l("svg",{class:"h-[20px] w-[20px]",viewBox:"0 0 24 24",fill:r.favorite?"white":"transparent",xmlns:"http://www.w3.org/2000/svg",stroke:"#ffffff"},X,8,Z))]))}}),O={class:"flex flex-col overflow-y-hidden"},P={class:"flex items-center justify-between mb-4"},W={class:"overflow-y-auto"},Y={class:"list-decimal ml-7"},tt=w({__name:"factsBlock",props:{facts:{}},setup(_){const r=_,n=g(!0);return(p,v)=>(o(),l("div",O,[t("div",P,[t("label",null,[j(t("input",{"onUpdate:modelValue":v[0]||(v[0]=e=>N(n)?n.value=e:null),type:"checkbox"},null,512),[[E,s(n)]]),A(" Без спойлеров ")])]),t("div",W,[t("ol",Y,[(o(!0),l(k,null,y(r.facts,e=>(o(),l("li",{class:L(["tracking-normal leading-relaxed my-2",e.spoiler&&s(n)?"blur-sm":""])},i(e.text),3))),256))])])]))}}),et={class:"mt-6 sm:mt-16"},st={class:"text-3xl mb-4"},ot={class:"flex flex-col gap-y-4"},I=w({__name:"movieSection",props:{title:{}},setup(_){const r=_;return(n,p)=>(o(),l("section",et,[t("h3",st,i(r.title),1),t("div",ot,[T(n.$slots,"default")])]))}}),lt={class:"w-full flex items-center justify-between mb-7"},at={key:0},nt={class:"text-3xl"},it={class:"text-white/70"},rt={class:"flex flex-col lg:flex-row gap-y-5 gap-x-12 max-h-[600px]"},ct=["data-kinopoisk"],ut=t("p",{class:"text-lg font-bold"},"Тип:",-1),dt={key:0},_t=t("p",{class:"text-lg font-bold"},"Страна производства:",-1),pt=t("p",{class:"text-lg font-bold"},"Год выпуска:",-1),vt=t("p",{class:"text-lg font-bold"},"Описание:",-1),ft={class:"relative group"},mt={class:"blur-lg transition-all group-hover:blur-0 flex gap-x-4 overflow-x-auto h-[250px]"},ht=["src","alt"],xt=t("div",{class:"opacity-100 group-hover:hidden transition-opacity absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-white text-4xl"}," Может содержать спойлеры ",-1),Ct=w({__name:"[id]",setup(_){const r=G(),n=D(),p=h(()=>Array.isArray(r.params.id)?r.params.id[0]:r.params.id),v=new z,e=g(null),m=g(null),b=g([]),C=h(()=>{var a;return(a=e.value)==null?void 0:a.genres.map(c=>c.genre)}),$=h(()=>{var a;return(a=e.value)==null?void 0:a.countries.map(c=>c.country)}),F=h(()=>{var a,c,d;return((a=e.value)==null?void 0:a.type)==="FILM"?"Фильм":((c=e.value)==null?void 0:c.type)==="TV_SERIES"?"Сериал":((d=e.value)==null?void 0:d.type)==="MINI_SERIES"?"Мини-сериал":"Фильм или сериал"});U(async()=>{e.value=await v.getById(p.value),e.value.favorite=n.checkFavorite(e.value.kinopoiskId),m.value=await v.getFacts(p.value).then(c=>c.map(d=>{const u=d.text.replace(/(<([^>]+)>)/gi,"");return{...d,text:u}})),b.value=await v.getMovieImages(+p.value);const a=document.createElement("script");a.setAttribute("src","/talkiee2/kinobox.min.js"),a.async=!0,document.head.appendChild(a)});const R=()=>{e.value&&(n.favoriteToggle(e.value),e.value.favorite=!e.value.favorite)};return(a,c)=>{const d=M;return s(e)?(o(),V(d,{key:0,class:"pt-24"},{default:x(()=>[t("div",lt,[s(C)?(o(),l("div",at,[t("h1",nt,i(s(e).name),1),(o(!0),l(k,null,y(s(C),(u,S)=>(o(),l("span",it,i(u)+i(S===s(C).length-1?"":", "),1))),256))])):f("",!0),B(q,{favorite:s(e).favorite,onClick:R},null,8,["favorite"])]),t("div",rt,[t("div",{"data-kinobox":"auto","data-kinopoisk":s(e).kinopoiskId,class:"h-auto w-full lg:w-[70%] mx-auto"},null,8,ct)]),B(I,{class:"",title:"Информация"},{default:x(()=>[t("div",null,[ut,t("div",null,i(s(F)),1)]),s($)?(o(),l("div",dt,[_t,t("div",null,[(o(!0),l(k,null,y(s($),(u,S)=>(o(),l("span",null,i(u)+i(S===s($).length-1?"":", "),1))),256))])])):f("",!0),t("div",null,[pt,t("div",null,i(s(e).year),1)]),t("div",null,[vt,t("div",null,i(s(e).description),1)])]),_:1}),s(b).length?(o(),V(I,{key:0,title:"Галерея",class:"mt-16"},{default:x(()=>[t("div",ft,[t("div",mt,[(o(!0),l(k,null,y(s(b),u=>(o(),l("img",{class:"h-full",src:u.previewUrl,alt:u.previewUrl},null,8,ht))),256))]),xt])]),_:1})):f("",!0),s(m)&&s(m).length?(o(),V(I,{key:1,title:"Факты"},{default:x(()=>[B(tt,{facts:s(m)},null,8,["facts"])]),_:1})):f("",!0)]),_:1})):f("",!0)}}});export{Ct as default};
