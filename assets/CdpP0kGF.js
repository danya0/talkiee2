var o=Object.defineProperty;var c=(e,s,t)=>s in e?o(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var n=(e,s,t)=>c(e,typeof s!="symbol"?s+"":s,t);var i=(e=>(e.POPULAR_SERIES="POPULAR_SERIES",e.TOP_POPULAR_MOVIES="TOP_POPULAR_MOVIES",e.TOP_POPULAR_ALL="TOP_POPULAR_ALL",e))(i||{});function r(e){let s=e.ratingKinopoisk||e.ratingImdb||e.rating||0;return s==="null"&&(s=void 0),{kinopoiskId:e.kinopoiskId||e.filmId,countries:e.countries,genres:e.genres||[],rating:s,year:e.year||"no year",type:e.type||"unknown type",posterUrl:e.posterUrl||"",posterUrlPreview:e.posterUrlPreview||"",name:e.nameRu||e.nameEn||e.nameOriginal||"",favorite:!1,description:e.description}}function p(e){return{imageUrl:e==null?void 0:e.imageUrl,previewUrl:e==null?void 0:e.previewUrl}}function l(e){return{type:e==null?void 0:e.type,spoiler:e==null?void 0:e.spoiler,text:e==null?void 0:e.text}}class f{constructor(){n(this,"xKey","c20595a1-3d8c-4cbd-92eb-fd7b0fa75c67");n(this,"baseUrl","https://kinopoiskapiunofficial.tech")}async fetch(s,t,a){return await(await fetch(`${this.baseUrl}${s}`+new URLSearchParams(a),{method:t,headers:{"X-API-KEY":this.xKey,"Content-Type":"application/json"}})).json()}async getById(s){const t=await this.fetch(`/api/v2.2/films/${s}`,"GET");return r(t)}async getFacts(s){return(await this.fetch(`/api/v2.2/films/${s}/facts`,"GET")).items.map(a=>l(a))}async getByKeyword(s,t){const a=await this.fetch("/api/v2.1/films/search-by-keyword?","GET",{keyword:s,page:`${t}`});return{searchFilmsCountResult:a.searchFilmsCountResult,items:a.films.map(r)}}async getCollections(s,t=i.TOP_POPULAR_ALL){const a=await this.fetch("/api/v2.2/films/collections?","GET",{type:t,page:`${s}`});return console.log("collection -> ",a),{items:a.items.map(r),totalPages:a.totalPages}}async getMovieImages(s){const t=await this.fetch(`/api/v2.2/films/${s}/images?`,"GET",{type:"STILL",page:"1"});return t.items.length?t.items.map(p):[]}}const u=new f;export{f as K,i as M,u as k};
