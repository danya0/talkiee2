import{u as N,a as A,s as L,_ as T}from"./BX3lnOR7.js";import{_ as G}from"./DelKvxxy.js";import{d as $,v as o,x as l,y as t,r as y,N as U,Z as z,G as e,Q as D,C as K,L as b,M as C,X as Z,z as i,_ as H,R as J,j as g,o as Q,F as I,B as k,J as f,A as w}from"./Bx2Tcgxz.js";import{K as X}from"./D_sfbCPW.js";import"./DXt85jR_.js";import"./DlAUqK2U.js";const q={class:"p-2 rounded-lg transition-colors bg-orange-500"},O=["fill"],P=t("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"},null,-1),W=t("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Y=t("g",{id:"SVGRepo_iconCarrier"},[t("path",{d:"M5 6.2C5 5.07989 5 4.51984 5.21799 4.09202C5.40973 3.71569 5.71569 3.40973 6.09202 3.21799C6.51984 3 7.07989 3 8.2 3H15.8C16.9201 3 17.4802 3 17.908 3.21799C18.2843 3.40973 18.5903 3.71569 18.782 4.09202C19 4.51984 19 5.07989 19 6.2V21L12 16L5 21V6.2Z",stroke:"white","stroke-width":"2","stroke-linejoin":"round"})],-1),tt=[P,W,Y],et=$({__name:"movieFavoriteButton",props:{favorite:{type:Boolean}},setup(_){const r=_;return(c,m)=>(o(),l("button",q,[(o(),l("svg",{class:"h-[20px] w-[20px]",viewBox:"0 0 24 24",fill:r.favorite?"white":"transparent",xmlns:"http://www.w3.org/2000/svg",stroke:"#ffffff"},tt,8,O))]))}}),st={class:"flex flex-col overflow-y-hidden"},ot={class:"flex items-center justify-between mb-4"},at={class:"overflow-y-auto"},lt={class:"list-decimal ml-7"},nt=$({__name:"factsBlock",props:{facts:{}},setup(_){const r=_,c=y(!0);return(m,p)=>(o(),l("div",st,[t("div",ot,[t("label",null,[U(t("input",{"onUpdate:modelValue":p[0]||(p[0]=u=>D(c)?c.value=u:null),type:"checkbox"},null,512),[[z,e(c)]]),K(" Без спойлеров ")])]),t("div",at,[t("ol",lt,[(o(!0),l(b,null,C(r.facts,u=>(o(),l("li",{class:Z(["tracking-normal leading-relaxed my-2",u.spoiler&&e(c)?"blur-sm":""])},i(u.text),3))),256))])])]))}}),it={class:"mt-6 sm:mt-16"},rt={class:"text-3xl mb-4"},ct={class:"flex flex-col gap-y-4"},F=$({__name:"movieSection",props:{title:{}},setup(_){const r=_;return(c,m)=>(o(),l("section",it,[t("h3",rt,i(r.title),1),t("div",ct,[H(c.$slots,"default")])]))}}),ut={class:"w-full flex items-center justify-between mb-7"},dt={key:0},_t={class:"text-3xl"},pt={class:"text-white/70"},vt={class:"flex flex-col lg:flex-row gap-y-5 gap-x-12 max-h-[600px]"},ft=["data-kinopoisk"],mt=t("p",{class:"text-lg font-bold"},"Тип:",-1),ht={key:0},xt=t("p",{class:"text-lg font-bold"},"Страна производства:",-1),gt=t("p",{class:"text-lg font-bold"},"Год выпуска:",-1),kt=t("p",{class:"text-lg font-bold"},"Описание:",-1),wt={class:"flex gap-x-2"},yt=t("p",{class:"text-lg font-bold"},"Ваша оценка:",-1),bt={class:"max-w-[200px] grow"},Ct={class:"relative group"},$t={class:"blur-lg transition-all group-hover:blur-0 flex gap-x-4 overflow-x-auto h-[250px]"},St=["src","alt"],Rt=t("div",{class:"opacity-100 group-hover:hidden transition-opacity absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-white text-4xl"}," Может содержать спойлеры ",-1),Et=$({__name:"[id]",setup(_){const r=J(),c=N(),m=A(),p=g(()=>Array.isArray(r.params.id)?r.params.id[0]:r.params.id),u=new X,s=y(null),h=y(null),S=y([]),R=g(()=>{var a;return(a=s.value)==null?void 0:a.genres.map(n=>n.genre)}),V=g(()=>{var a;return(a=s.value)==null?void 0:a.countries.map(n=>n.country)}),M=g(()=>{var a,n,v;return((a=s.value)==null?void 0:a.type)==="FILM"?"Фильм":((n=s.value)==null?void 0:n.type)==="TV_SERIES"?"Сериал":((v=s.value)==null?void 0:v.type)==="MINI_SERIES"?"Мини-сериал":"Фильм или сериал"});Q(async()=>{const a=await u.getById(p.value);s.value=L([a])[0],h.value=await u.getFacts(p.value).then(v=>v.map(x=>{const d=x.text.replace(/(<([^>]+)>)/gi,"");return{...x,text:d}})),S.value=await u.getMovieImages(+p.value);const n=document.createElement("script");n.setAttribute("src","/talkiee2/kinobox.min.js"),n.async=!0,document.head.appendChild(n)});const j=()=>{s.value&&(c.favoriteToggle(s.value),s.value.favorite=!s.value.favorite)},E=a=>{s.value&&(m.rate(s.value,a),s.value.userRating=a)};return(a,n)=>{const v=T,x=G;return e(s)?(o(),I(x,{key:0,class:"pt-24"},{default:k(()=>[t("div",ut,[e(R)?(o(),l("div",dt,[t("h1",_t,i(e(s).name),1),(o(!0),l(b,null,C(e(R),(d,B)=>(o(),l("span",pt,i(d)+i(B===e(R).length-1?"":", "),1))),256))])):f("",!0),w(et,{favorite:e(s).favorite,onClick:j},null,8,["favorite"])]),t("div",vt,[t("div",{"data-kinobox":"auto","data-kinopoisk":e(s).kinopoiskId,class:"h-auto w-full lg:w-[70%] mx-auto"},null,8,ft)]),w(F,{class:"",title:"Информация"},{default:k(()=>[t("div",null,[mt,t("div",null,i(e(M)),1)]),e(V)?(o(),l("div",ht,[xt,t("div",null,[(o(!0),l(b,null,C(e(V),(d,B)=>(o(),l("span",null,i(d)+i(B===e(V).length-1?"":", "),1))),256))])])):f("",!0),t("div",null,[gt,t("div",null,i(e(s).year),1)]),t("div",null,[kt,t("div",null,i(e(s).description),1)]),t("div",wt,[yt,t("div",bt,[w(v,{rating:e(s).userRating,onRate:E},null,8,["rating"])])])]),_:1}),e(S).length?(o(),I(F,{key:0,title:"Галерея",class:"mt-16"},{default:k(()=>[t("div",Ct,[t("div",$t,[(o(!0),l(b,null,C(e(S),d=>(o(),l("img",{class:"h-full",src:d.previewUrl,alt:d.previewUrl},null,8,St))),256))]),Rt])]),_:1})):f("",!0),e(h)&&e(h).length?(o(),I(F,{key:1,title:"Факты"},{default:k(()=>[w(nt,{facts:e(h)},null,8,["facts"])]),_:1})):f("",!0)]),_:1})):f("",!0)}}});export{Et as default};
